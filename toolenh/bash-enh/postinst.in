#!/bin/bash

echo "Set permission of sudoer files"
    chmod 440 @DESTDIR@@sudoersdir@/keep-hist

skel_rc=@sysconfdir@/skel/.bashrc
echo -n "Remove HIST-overrides from $skel_rc... "
    if [ -f $skel_rc ]; then
        tmp=/tmp/bashrc-repl-$$.$RANDOM
        egrep -v "\bHIST(\w+)\b" $skel_rc >$tmp
        if ! cmp -s $skel_rc $tmp; then
            mv -f $tmp $skel_rc
            echo Done
        else
            rm -f $tmp
            echo Skipped
        fi
    else
        echo Skipped
    fi

bashrc=@DESTDIR@@sysconfdir@/bash.bashrc
    lineconf -tm "Enable shlib functions" \
        $bashrc @shlib::enable  ". shlib"
    lineconf -tm "shlib import findabc" \
        $bashrc @shlib::findabc "import findabc"

for rc in $bashrc $skel_rc; do
    lineconf -tm "Set colorful PS1 (in $rc)" \
        $rc @color::PS1 \
        'PS1="\[\e]0;\u@\h: \w\a\]\${debian_chroot:+(\$debian_chroot)}\[\e[1;42m\]\u@\h:\[\e[0;47m\]\w\[\e[42m\]\$ \[\e[m\]"'
done

exit 0
