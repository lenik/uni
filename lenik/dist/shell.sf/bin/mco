#!/usr/bin/perl

use strict;
use Getopt::Long;


sub help {
    print <<"EOM"
My CheckOut (Anonymous Pserver)
Written by Snima Denik, Dec 29 2004

    mco <root> [<module-name>]

    predefined root names:
        j       eXtendable Javascript Library
        s       CHange SID
        m       Mami' Secret Box
        u       EoooDB

        == obsoluted ==
        3       MP-3R
        fj      FreeJava
        li      LiiiL

    predefined module names
        (null)  www
        w       www
        s       source
        d       documentation
        b       binary
EOM
}


our %roots = (
    'j'     => 'xjl',
    's'     => 'chsid',
    'm'     => 'msb',
    'u'     => 'eooodb',
    '3'     => 'mp-3',
    '3r'    => 'mp3r',
    'fj'    => 'freejava',
    'li'    => 'liiil',
    );

our %modules = (
    'w'     => 'www',
    's'     => 'source',
    'd'     => 'documentation',
    'b'     => 'binary',
    );

our $opt_root = 'xjl';
our $opt_module = 'www';

our $opt_cvs = ':pserver:anonymous:@cvs1.sourceforge.net:/cvsroot/';


    GetOptions(
        'root'      => \$opt_root,
        'module'    => \$opt_module,
        'cvs'       => \$opt_cvs,
        'help'      => sub { &help; exit }
        );

    $opt_root = $roots{$opt_root} if ($roots{$opt_root});
    $opt_module = $modules{$opt_module} if ($modules{$opt_module});

    my $cmdline;
    if (-d $opt_module) {
        $cmdline = "cvs -z3 -d $opt_cvs$opt_root update $opt_module";
    } else {
        $cmdline = "cvs -z3 -d $opt_cvs$opt_root co $opt_module";
    }

    print "$cmdline \n";
    exec $cmdline;
