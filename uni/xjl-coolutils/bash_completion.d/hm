function _hm() {
    local cur="${COMP_WORDS[COMP_CWORD]}"
    local cache=/var/tmp/hm

    if [ $COMP_CWORD = 1 ]; then
        make1 -qoT 1wk $cache-pkg \; hm -p
        COMPREPLY=( $( grep "^$cur" $cache-pkg ) )
    else
        local pkg="${COMP_WORDS[1]}"
        make1 -qoT 1wk "$cache.$pkg" \; hm -al "$pkg"
        COMPREPLY=( $( grep "^$cur" "$cache.$pkg" ) )
    fi
    return 0
} && complete -F _hm hm
