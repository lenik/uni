function _hm() {
    local cur="${COMP_WORDS[COMP_CWORD]}"

    if [ $COMP_CWORD = 1 ]; then
        COMPREPLY=( $( hm -p | grep "^$cur" ) )
    else
        local package="${COMP_WORDS[1]}"
        COMPREPLY=( $( hm -al "$package" "$cur" | cut -f1 ) )
    fi
    return 0
} && complete -F _hm hm
