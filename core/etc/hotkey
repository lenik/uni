#NoTrayIcon
#SingleInstance ignore

setworkingdir %USERPROFILE%

funpack(count, prefix) {
	global
	local index = 0
	local pid
	loop %count% {
		pid := %prefix%_p%a_index%
		if pid {
			process, exist, % pid
			if errorlevel {
				continue
			}
		}
		index := a_index
		break
	}
	if index {
		local prog = %prefix%%index%
		run, %prog%, , , %prefix%_p%index%
	}
}

runp(pre, cmd) {
	regwrite, REG_SZ, HKEY_LOCAL_MACHINE, SOFTWARE\Microsoft\Command Processor, AutoRun, %pre%
	run %cmd%
}

!tab::send {escape}{tab}
lwin & tab::alttab
lwin & capslock::shiftalttab

#!e::edit
#!r::reload
#!p::pause
#!s::suspend
#!bs::exitapp
#!h::
	splitpath, a_ahkpath, name, dir
	run % dir . "/autohotkey.chm"
	return
#!/::
	if A_IconHidden {
		menu, tray, icon
	} else {
		menu, tray, noicon
	}
	return

appskey & down::send {media_play_pause}
appskey & up::send {media_stop}
appskey & left::send {media_prev}
appskey & right::send {media_next}
appskey & numpadadd::send {volumn_up}
appskey & numpadsub::send {volumn_down}
appskey::send {appskey}

#b::run big
#c::run cmd
#f::run firefox
#n::run no
#p::run perldev
#s::run scilab
#t::run sh
#-::
	nfs1 = %wperl% %lapiota%\bin\nfs.pl --wait-close
	nfs2 = %wperl% %lapiota%\bin\nfs.pl --wait-close temp-
	nfs3 = %wperl% %lapiota%\bin\nfs.pl --wait-close xxx-
	funpack(3, "nfs")
	return

#,::run stairs
; #u::run ue
