#!/usr/bin/perl
# $Id: re-parts,v 1.2 2004-09-22 08:39:11 dansei Exp $

# re-parts <regex> ...

use strict;

my $re = shift @ARGV;

print "parts analyse of (perl)regular-expression\n";
print "regex: $re\n\n";

my $line = 0;
while (<>) {
	chop;
	my $part = 0;
	if (!m/$re/) {
		print "    <NOT MATCHED!>\n";
		next;
	}

	print "L$line: \n"; #$_\n    ";
	while (m/$re/g) {
		#print "$`|" if ($part == 0);
		print "    $`<$&>$'\n";
		$part++;
	}
	print "\n";

	if (m/$re/) {
		print "    Pos=[@-]\n";
		print "    \$1^$-[1]: \"$1\"\n" if $1;
		print "    \$2^$-[2]: \"$2\"\n" if $2;
		print "    \$3^$-[3]: \"$3\"\n" if $3;
		print "    \$4^$-[4]: \"$4\"\n" if $4;
		print "    \$5^$-[5]: \"$5\"\n" if $5;
		print "    \$6^$-[6]: \"$6\"\n" if $6;
		print "    \$7^$-[7]: \"$7\"\n" if $7;
		print "    \$8^$-[8]: \"$8\"\n" if $8;
		print "    \$9^$-[9]: \"$9\"\n" if $9;
		print "    \$&: \"$&\"\n";
		print "\n";
	}

	$line++;
}
